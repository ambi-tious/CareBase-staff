# 連絡・予定 週間表示UI改善仕様書

## 概要
連絡・予定機能の週間表示を、Googleカレンダー風の日付横並びレイアウトに改善し、ユーザビリティと視認性を大幅に向上させる。

## 1. UIデザイン仕様書

### 1.1 レイアウト構造
```
┌─────────────────────────────────────────────────────────────┐
│ [<] 2025年1月6日 〜 1月12日                        週間表示 │
├─────────────────────────────────────────────────────────────┤
│  月   │  火   │  水   │  木   │  金   │  土   │  日   │
│  6    │  7    │  8    │  9    │ 10    │ 11    │ 12    │
├───────┼───────┼───────┼───────┼───────┼───────┼───────┤
│ 08:00 │       │ 09:00 │       │       │       │       │
│ 会議  │       │ 研修  │       │       │       │       │
│ ───── │       │ ───── │       │       │       │       │
│ 14:00 │ 10:30 │       │ 15:00 │       │       │       │
│ 面会  │ 点検  │       │ 訓練  │       │       │       │
│       │       │       │       │       │       │       │
└───────┴───────┴───────┴───────┴───────┴───────┴───────┘
```

### 1.2 詳細寸法・色指定

#### ヘッダー部分
- **高さ**: 80px
- **背景色**: `bg-gray-50` (#f9fafb)
- **ボーダー**: `border-gray-200` (#e5e7eb)
- **今日の日付**: `bg-blue-50` (#eff6ff) + `border-blue-200` (#bfdbfe)

#### 日付表示
- **曜日名**: 12px, font-weight: 500, `text-gray-600`, 大文字
- **日付数字**: 18px, font-weight: 600, `text-gray-800`
- **今日の数字**: `bg-carebase-blue` + `text-white`, 32px円形

#### イベントカード
- **パディング**: 12px
- **ボーダー半径**: 8px
- **左ボーダー**: 4px（重要度別色分け）
- **ホバー効果**: `scale-[1.02]` + `shadow-md`

#### 色分け仕様
```css
/* 種別別背景色 */
.contact: bg-green-50 border-green-200    /* 連絡事項 */
.schedule: bg-blue-50 border-blue-200     /* 予定 */
.handover: bg-purple-50 border-purple-200 /* 申し送り */

/* 重要度別左ボーダー */
.priority-high: border-l-red-500     /* 高 */
.priority-medium: border-l-yellow-500 /* 中 */
.priority-low: border-l-blue-500     /* 低 */
```

### 1.3 インタラクション仕様

#### ホバー効果
- **イベントカード**: 1.02倍スケール + 影の強化
- **日付列**: 薄い青色オーバーレイ + 新規作成ボタン表示
- **アニメーション**: 200ms ease-out

#### クリック操作
- **イベントカード**: 詳細画面へ遷移
- **空の日付エリア**: 新規作成画面へ遷移（日付自動設定）
- **週ナビゲーション**: 前週/次週への移動

#### 状態表示
- **通常**: デフォルトスタイル
- **選択中**: `ring-2 ring-carebase-blue`
- **編集中**: `ring-2 ring-yellow-500`
- **ローディング**: スケルトンアニメーション

## 2. HTML/CSS構造概要

### 2.1 セマンティックHTML構造
```html
<div class="weekly-calendar-container" role="grid" aria-label="週間カレンダー">
  <!-- ヘッダー -->
  <div class="weekly-header" role="row">
    <div class="weekly-day-header" role="columnheader">
      <div class="day-label">
        <div class="day-name">月</div>
        <div class="day-number">6</div>
      </div>
    </div>
    <!-- 他の曜日... -->
  </div>
  
  <!-- イベントグリッド -->
  <div class="weekly-events-grid" role="row">
    <div class="weekly-day-column" role="gridcell">
      <div class="day-events">
        <div class="event-item" role="button" tabindex="0">
          <!-- イベント内容 -->
        </div>
      </div>
    </div>
    <!-- 他の日付列... -->
  </div>
</div>
```

### 2.2 CSS Grid/Flexbox活用
```css
/* メインレイアウト */
.weekly-header, .weekly-events-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
}

/* 日付列内のレイアウト */
.day-events {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* レスポンシブ調整 */
@media (max-width: 768px) {
  .weekly-header, .weekly-events-grid {
    grid-template-columns: repeat(3, 1fr); /* 3日表示 */
  }
}
```

### 2.3 主要クラス名と役割
- `.weekly-calendar-container`: メインコンテナ
- `.weekly-header`: 曜日・日付ヘッダー
- `.weekly-events-grid`: イベント表示グリッド
- `.weekly-day-column`: 各日付列
- `.event-item`: 個別イベントカード
- `.today-indicator`: 今日のハイライト
- `.day-add-button`: 新規作成ボタン

## 3. 既存システム変更点リスト

### 3.1 削除が必要な既存機能
- ❌ 縦積み日別カード表示
- ❌ 個別日付カードのスタイリング
- ❌ 非効率な日付ナビゲーション

### 3.2 新規追加が必要な機能
- ✅ 7列グリッドレイアウトシステム
- ✅ 週間ナビゲーション（前週/次週）
- ✅ レスポンシブ日数調整（7→5→3→1日）
- ✅ 今日のハイライト表示
- ✅ ホバー時の新規作成ボタン
- ✅ イベントアニメーション
- ✅ 週末の視覚的区別

### 3.3 修正が必要な既存機能
- 🔄 `ContactScheduleCalendarView`コンポーネント
  - `renderWeekView()`メソッドの完全書き換え
  - プロップスに`onDateChange`追加
- 🔄 `ContactScheduleBoard`コンポーネント
  - 日付変更ハンドラーの追加
- 🔄 CSSスタイルシート
  - 週間カレンダー専用スタイル追加

### 3.4 データ構造の変更要件
- 既存の`ContactScheduleItem`型は変更不要
- 日付フィルタリング関数は既存のまま利用可能
- 新規作成時の日付自動設定機能追加

## 4. 実装優先度とスケジュール案

### Phase 1: 基本機能（必須）- 2週間
**Week 1**
- [x] 7列グリッドレイアウト実装
- [x] 基本的な日付ヘッダー表示
- [x] イベントの日付別表示
- [x] 今日のハイライト機能

**Week 2**
- [x] 週間ナビゲーション機能
- [x] イベントクリック機能
- [x] 基本的なレスポンシブ対応
- [x] 既存機能との統合テスト

### Phase 2: 拡張機能（推奨）- 1週間
**Week 3**
- [ ] 高度なアニメーション効果
- [ ] ドラッグ&ドロップ機能
- [ ] キーボードナビゲーション
- [ ] アクセシビリティ強化
- [ ] パフォーマンス最適化

### Phase 3: 最適化（オプション）- 1週間
**Week 4**
- [ ] 仮想スクロール実装
- [ ] ダークモード対応
- [ ] 高コントラストモード
- [ ] 詳細なユーザビリティテスト

## 5. 実装時の注意点

### 5.1 パフォーマンス考慮事項
- イベント数が多い場合の仮想化
- React.memoによるコンポーネント最適化
- 不要な再レンダリングの防止

### 5.2 アクセシビリティ要件
- ARIA属性の適切な設定
- キーボードナビゲーション対応
- スクリーンリーダー対応
- 色覚異常者への配慮

### 5.3 ブラウザ互換性
- CSS Grid対応（IE11除く）
- Flexbox fallback
- モダンブラウザ最適化

### 5.4 テスト要件
- 各デバイスサイズでの表示確認
- イベント数による負荷テスト
- アクセシビリティ監査
- ユーザビリティテスト

## 6. 成功指標（KPI）

### 6.1 ユーザビリティ指標
- 週間スケジュール把握時間: 50%短縮
- イベント作成完了率: 20%向上
- ユーザー満足度: 4.5/5.0以上

### 6.2 技術指標
- 初期表示速度: 2秒以内
- 1000件イベント表示: 60fps維持
- アクセシビリティスコア: 95点以上

この改善により、介護現場のスタッフが週間の連絡・予定を直感的に把握し、効率的な業務運営を実現できます。
#!/usr/bin/env sh

echo "🔍 コミット前のチェックを実行中..."

# Lintチェックを実行
echo "🔍 Lintチェックを実行中..."
npm run lint

# Lintチェックが成功した場合のみテストを実行
if [ $? -eq 0 ]; then
    echo "✅ Lintチェック成功！テストを実行中..."
    npm run test:ci

    # テストが成功した場合のみlint-stagedを実行
    if [ $? -eq 0 ]; then
        echo "✅ テスト成功！lint-stagedを実行中..."
        npx lint-staged
    else
        echo "❌ テストに失敗しました。コミットを中止します。"
        exit 1
    fi
else
    echo "❌ Lintチェックに失敗しました。コミットを中止します。"
    exit 1
fi
